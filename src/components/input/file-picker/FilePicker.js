import React, { useState } from 'react';
import {
    Card
} from 'react-bootstrap';

const FilePicker = () => {
    let fileReader;

    const [stringsByUpload, setStringsByUpload] = useState([]);
    const [count, setCount] = useState(0)

    const handleFileRead = (e) => {
        setStringsByUpload(stringsByUpload.push(...fileReader.result.split(',\n')));
        setCount(count + stringsByUpload.length);
        console.log(stringsByUpload);
    }

    const handleFileChosen = (file) => {
        fileReader = new FileReader();
        fileReader.onloadend = handleFileRead;
        fileReader.readAsText(file);
    }

    return (
        <div>
            <Card style={{
                width: '90%',
                marginTop: '4vh',
                fontSize: '14px',
                height: '20vh',
                borderRadius: '0px',
                border: '2px solid #999',
            }}>
                <Card.Body>
                    {stringsByUpload}
                </Card.Body>
                <Card.Footer>
                    <input type='file' accept='.csv' onChange={e => {handleFileChosen(e.target.files[0]);}} id='file' className='btn btn-dark' style={{
                        fontSize: '12px',
                    }} />
                </Card.Footer>
            </Card>
        </div>
    )
}

export default FilePicker
